<!DOCTYPE html>

@{
    string name = Convert.ToString(User.Identity.Name);
    string role;

    name = name.Remove(0, 8).ToLower();

    ProjectRequest.Models.ProjectRequestEntities requestInfo = new ProjectRequest.Models.ProjectRequestEntities();

    var staff = requestInfo.Staffs.Select(s => s.staffID).ToList();

    if(staff.Contains(name))
    {
        role = "Agent";
    }
    else
    {
        role = "User";
    }

}

<html @*ng-app="CCFiles"*@ @*ng-controller="CCFileController"*@>
<head>

    <title>@ViewBag.Title</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <link rel="stylesheet" href="~/css/print2.css" /> 

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
    <link href="https://Secure.sullivan.edu/forms/css/jquery-ui-1.10.1.custom.css" rel="stylesheet" />

    <link rel="stylesheet" href="~/css/ProjectTracking.css" /> 

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
@*    <link href='https://fonts.googleapis.com/css?family=Iceberg' rel='stylesheet' type='text/css'>*@
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Patua+One' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>

    <style type="text/css">

    nav {
        /*background: #005953;*/

        background: #00796b;
        width: 100%;
        /*padding: 5px;*/
        height: 75px;
    }

    nav li a
    {
        height: 75px;
        font-family: 'Roboto Condensed', sans-serif;
        font-size: 1.0rem;
        font-weight: 600;
        padding-top: 5px;
    }

    nav a
    {
        text-decoration: none;

    }

    nav a:hover
    {
        color: white;
    }

    nav .button-collapse
    {
        padding-top: 10px;
    }

    .nav-wrapper img
    {
        margin-left: 15px;
        margin-top: 10px;
    }

    .nav-wrapper
    {
        max-width: 1200px;
        margin: 0 auto;
    }

    body
    {
        font-family: 'Roboto', sans-serif;
        font-size: 15px;
        color: black;
        background: #F5F6FA;
        /*padding-left: 5px;
        padding-right: 5px;*/
    }

    fieldset
    {
        padding: 10px;
        padding-top: 0px;
        background-color: #f1f3f4;
        border: none;
        margin-left: 10px;
        margin-right: 10px;
        box-shadow: 0px 1px 1px 0px rgba(0, 0, 0, 0.16);
        border-radius: 0.3em;
    }

    
    fieldset
    {
        padding-top: 20px;
        margin-top: 25px;
        border: none;
        border-color: #708090;
        border-width: 1px;
        /*padding-left: 0px;
        padding-right: 0px;*/
        background: white;
        max-width: 1200px;
    }

    .ViewCase
    {
        padding-top: 0px;
    }

    .caseHeader
    {
        background-color: #F0F0F0;
        color: #2F5E5E;
        margin: 0px;
    }

    legend
    {
        font-weight: bold;
        background-color: white;
        color: #448aff;
        font-size: 25px;
        padding: 5px;
        padding-left: 15px;
        padding-right: 15px;
        margin-top: 0px;
        font-family: 'Roboto Condensed', sans-serif;
        /*font-weight: 300;*/
        border-radius: 0.2em;
    }

    .CaseFilter
    {
        margin-top: 25px;

    }

    .headerGroup
    {
        background: white;
        padding: 10px;
        padding-top: 10px;
        /*border-bottom-left-radius: 0.3em;
        border-bottom-right-radius: 0.3em;*/
        border-radius: 0.3em;
        margin-top: 25px;

        box-shadow: 0px 1px 1px 0px rgba(0, 0, 0, 0.16);
    }

    /*.headerGroup img
    {
        margin-bottom: 20px;
    }*/

    .sectionGroup
    {
        background: white;
        max-width: 1200px;
        box-shadow: 0px 1px 1px 0px rgba(0, 0, 0, 0.16);
        border-radius: 0.3em;
    }

    .page-content
    {
        /*margin: 25px;*/
        margin: 0 auto;
        max-width: 1200px;
    }



    /*.sectionHeader
    {
        width: 100%
    }*/

    span, p, label
    {
        font-family: 'Roboto', sans-serif;
        font-size: 15px;
        color: black;
    }

    .ViewHeader
    {
         font-family: 'Roboto Condensed', sans-serif;
         color: black;
         font-size: 17px;
    }

    h1, h2, h3, h4, h5
    {
        font-family: 'Roboto Condensed', sans-serif;
    }

    .paging
    {
        overflow-wrap: break-word;
        /*width: 1100px;*/
        font-size: 20px;
    }

    .confirmationText
    {
        font-family: 'Roboto Slab', serif;
        font-size: 20px;
        /*color: #4d000d;*/
    }

    .tnFont
    {
        font-size: 16px;
    }

    .collapsible-body
    {
        background: white;
    }

    /*.confirmationText i
    {
        font-size: 18px;
    }*/

    a, .link
    {
        color: #00796b;
        /*font-weight: 600;*/
        font-family: 'Roboto', sans-serif;
        /*text-decoration: underline;*/
    }

    a:hover, .link:hover
    {
        color: #448aff;
        /*font-weight: 600;*/
    }

    .input-field .optional
    {
        font-weight: 500;
    }

    .totalCases
    {
        font-family: 'Roboto Condensed', sans-serif;
        color: #448aff;
        font-size: 25px;
        margin: 0px;
        margin-right: 20px;
        margin-bottom: 20px;
    }

    /*.infoTable
    {
        width: 100px;
    }*/

    th
    {
        font-family: 'Roboto Condensed', sans-serif;
        font-size: 17px;
        /*color: #4d000d;*/
        color: black;
    }

    td
    {
         font-family: 'Roboto', sans-serif;
         padding: 0px;
         padding-right: 5px;
         padding-left: 5px;
    }

    tfoot tr td{
        text-align: right;
        font-family: 'Roboto Slab', serif;
        font-weight:500;
        font-size: 25px;
        width: 50px;
        color: #448aff;
    }

    .editCase td
    {
         padding: 0px;
         padding-right: 5px;
         padding-left: 5px;
    }

    tfoot tr
    {
        column-span: none;
    }

    .row
    {
        margin-bottom: 0px;
    }

    .input-field
    {
        margin-bottom: 25px;
    }

    .extraSpace
    {
        margin-bottom: 25px;
    }

    .extraSpaceLarge
    {
        margin-bottom: 50px;
    }

    .leftIndent
    {
        margin-left: 45px;
    }

    .noSpace
    {
        margin-bottom: 0px;
    }

    .noTopSpace
    {
        margin-top: 0px;
    }

    .noBottomSpace
    {
        margin-bottom: 0px;
    }

    .smallTopSpace
    {
        margin-top: 25px;
    }

    #staffList, #emailList
    {
        position: absolute;
        width: 200px;
        border: solid 1px;
        border-color: #336666;
        z-index: 20;
        background-color: white;
        text-align: center;
        padding: 5px;
    }

    .btn
    {
        font-weight: 600;
        font-family: 'Roboto', sans-serif;
        font-size: 20px;
        background: #448aff;
        margin-top: 25px;
        margin-bottom: 25px;
    }

    .upload span
    {
        color: white;
    }

    .btn:hover
    {
        background: #00796b;
        color: white;
    }

    input[type=submit] {
        height: 100%;
        width: 100%;
        padding: 0 2rem;
    }


    input[type="submit"]:disabled
    {
        background: #708090;
    }

    /*.btn a:hover
    {
        color: white;
    }*/

    .cbHeader, .lblDisplay
    {
        margin: 0px;
        margin-left: 15px;
        font-weight: 600;
        font-family: 'Roboto Condensed', sans-serif;
        font-size: 18px;
    }

    .lblDisplay
    {
        font-family: 'Roboto Condensed', sans-serif;
        color: #00796b;
        font-size: 20px;
        display: block;
        margin-left: 45px;
        margin-top: 10px;
    }

    .collegeHeader
    {
        font-family: 'Roboto Condensed', sans-serif;
        color: #00796b;
        font-size: 20px;
        margin-bottom: 0px;
        margin-top: 10px;
        text-decoration:underline;
    }

    .switch .switchText
    {
        font-family: 'Roboto Condensed', sans-serif;
    }

    .miniHeader
    {
        font-family: 'Roboto Slab', serif;
        font-weight: 600;
        font-size: 15px;
    }

    .warning, .warningLarge
    {
        font-family: 'Roboto Slab', serif;
        font-weight: 600;
        font-size: 15px;
        color: #CC0000;
    }

    .warningLarge
    {
        font-size: 17px;
    }

    /*.extraTopSpace
    {
        margin-top: 20px;
    }*/

    .cbList
    {
        margin-left: 30px;
        margin-top: 0px;
        padding-top: 0px;
    }

    /*[type="checkbox"] + label
    {
        font-family: 'Open Sans', sans-serif;
        font-size: 14px;
    }*/

    [type="checkbox"]:checked+label:before
    {
        border-right-color: #4d000d;
        border-bottom-color: #4d000d;
    }

    [type="radio"]:checked+label:after
    {
        border: #4d000d;
        background: #4d000d;
    }

    [type="checkbox"]:not(:checked), [type="checkbox"]:checked, [type="radio"]:not(:checked), [type="radio"]:checked {
      visibility: visible;
    }

    .radio
    {
        margin-left: 25px;
    }

    .radioLarge
    {
        margin-left: 25px;
    }

    .waves-effect.waves-brown .waves-ripple {
        background-color: #4d000d;
    }

    /* For Select Labels */
    .select-wrapper + label
    {
        font-size: 1.0rem;
    }

    .selectLarge .select-wrapper
    {
        margin-top: 25px;
    }

    .selectXLarge .select-wrapper
    {
        margin-top: 45px;
    }

    .selectXXLarge .select-wrapper
    {
        margin-top: 100px;
    }

    .selectIcon .select-wrapper, .selectIcon select
    {
        margin-left: 45px;
    }

    /*.input-field
    {
        line-height: 1.0em;
    }*/

    .select-dropdown li.disabled > span
    {
        color: #708090;
        font-family: 'Roboto Condensed', sans-serif;
        font-weight: 600;
        margin-left: 0px;
        text-decoration: underline;
        font-size: 15px;
    }

    .rblSpace
    {
        margin-top: 50px;
    }

    .rblSpaceExtra
    {
        margin-top: 75px;
    }

    .dropdown-content li > span
    {
        color: black;
        font-family: 'Roboto', sans-serif;
        font-size: 13px;
        font-weight: 400;
        margin-left: 5px;
        /*padding-top: 0px;
        padding-bottom: 0px;
        margin-top: 0px;
        margin-bottom: 0px;*/
        line-height: 1.0rem;
    }

    .input-field .select-wrapper span
    {
        font-family: 'Roboto', sans-serif;
    }


    /*.input-field
    {
        margin-bottom: 15px;
    }*/

    .input-field label {
        color: black;
        margin-left: 0px;
        font-family: 'Roboto Condensed', sans-serif;
        font-weight: 600;
    }

    .input-field label.active
    {
        color: black;
        font-size: 1rem;
        font-family: 'Roboto Condensed', sans-serif;
        font-weight: 600;
    }

    .input-field label.active.optional
    {
        font-weight: 500;
    }

    .input-field input[type=text]:focus + label, .input-field textarea.materialize-textarea:focus + label {
        color: #00796b;
        font-family: 'Roboto Condensed', sans-serif;
        font-weight: 600;
        
    }

    .input-field input[type=text]:focus, .input-field textarea.materialize-textarea:focus {
        border-bottom: 1px solid #00796b;
        box-shadow: none;

    }

    .input-field input[type=text], .input-field textarea {
        border-color: black;
        font-family: 'Roboto', sans-serif;
        color: black;
        font-size: 14px;
        margin-bottom: 0px;
    }

    .input-field .prefix
    {
        color: black;
    }

    .input-field .prefix.active
    {
        color: #00796b;
    }

    .validate
    {
        color: #CC0000;
        margin-left: 45px;
        font-weight: 600;
    }

    textarea.materialize-textarea
    {
        min-height: 1rem;
        padding-top: 12px;
        padding-bottom: 13px;
    }

    table .materialize-textarea
    {

        padding-top: 12px;
        padding-bottom: 13px;
        min-height: 1rem;
    }

    #ValidationSummary1
    {
        font-weight: 600;
        font-family: 'Roboto Condensed', sans-serif;
    }

    .radio {
        margin-top: 5px;
	}

    .switch label input[type="checkbox"]:checked + .lever
    {
        background-color: #668594;
    }


    .switch label input[type="checkbox"]:checked + .lever::after
    {
        background-color: #448aff;
    }

    .picker__calendar-container th, .picker__calendar-container thead, .picker__calendar-container tr, .picker__calendar-container tbody, .picker__calendar-container td
    {
        background: white;
        border-left: none;
    }

    .picker__calendar-container table tbody td
    {
        background: white;
        border: none;
    }

    .picker__frame
    {
        font-family: 'Roboto Condensed', sans-serif;
    }

    .picker__today, .picker__clear, .picker__close, .picker__day.picker__day--today
    {
        font-family: 'Roboto Condensed', sans-serif;
        color: black;
        font-weight: 600;
    }

    .picker__nav--prev:hover, .picker__nav--next:hover
    {
        background: #d9d9d9;
    }

    .picker__date-display
    {
        background: #00796b;
    }

    .picker__weekday-display
    {
        display: none;
    }

    picker__day--selected, .picker__day--selected:hover, .picker--focused .picker__day--selected
    {
        background: #00796b;
    }


    *::-webkit-input-placeholder {
        color: #708090;
    }
    *:-moz-placeholder {
        /* FF 4-18 */
        color: #708090;
    }
    *::-moz-placeholder {
        /* FF 19+ */
        color: #708090;
    }
    *:-ms-input-placeholder {
        /* IE 10+ */
        color: #708090;
    }

    table.striped > tbody > tr:nth-child(2n+1)
    {
        background-color: #F1F3F4;
    }


    footer.page-footer
    {
        background-color: #424242;
        font-weight: 600;
        font-family: 'Roboto', sans-serif;
        font-size: 15px;

        padding: 0px;
    }

    .footer-copyright
    {
        height: 75px;
    }

    </style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    @*<script src="https://Secure.sullivan.edu/forms/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>*@

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"></script>

    <script src="~/js/jquery-ui.min.js" type="text/javascript"></script>
    <script src="~/js/jquery.magnific-popup.min.js" type="text/javascript"></script>

</head>
<body ng-app="CCApp" ng-controller="caseCtrl">
    <!-- Uses a header that scrolls with the text, rather than staying
    locked at the top -->
    <!-- Always shows a header, even in smaller screens. -->

    @{
        string controllerName = ViewContext.RouteData.Values["controller"].ToString();
        string actionName = ViewContext.RouteData.Values["action"].ToString();
    }

    @if (role == "Agent")
    {
    <ul id="projectMenu" class="dropdown-content">
        <li><a href="~/Request/Index">All Cases</a></li>
        <li><a href="~/Request/MyProjects">My Cases</a></li>
        <li><a href="~/User/MyRequests">Cases I Submitted</a></li>
    </ul>
    <ul id="taskMenu" class="dropdown-content">
        <li><a href="~/Request/TaskList">Tasks</a></li>
        <li><a href="~/Request/TaskList?assignedTo=@name">My Tasks</a></li>
        <li><a href="~/Template/Index">Templates</a></li>
    </ul>
    <ul id="calenderMenu" class="dropdown-content">
        <li><a href="~/Calendar/Project">Case Calendar</a></li>
        <li><a href="~/Calendar/Project?agentAssigned=@name">My Case Calendar</a></li>
        <li><a href="~/Calendar/Task">Task Calendar</a></li>
        <li><a href="~/Calendar/Task?agentAssigned=@name">My Task Calendar</a></li>
        <li><a href="~/Calendar/Index">Event Calendar</a></li>
    </ul>
    <ul id="printMenu" class="dropdown-content">
        <li><a class="mdl-navigation__link" href="~/Request/PrintMyProjects" target="_blank">Print My Cases</a></li>
        <li><a class="mdl-navigation__link" href="~/Request/PrintMyTaskList" target="_blank">Print My Tasks</a></li>
    </ul>
    <nav>
        <div class="nav-wrapper">
            <a href="~/Default/Index" class="navbar-brand"><img src="~/images/CCFilesLogo.png" alt="Tracker Logo" /></a>
            <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">

                <li><a class="mdl-navigation__link" href="~/RequestForm.aspx" target="_blank">New Case</a></li>
                <!-- Dropdown Trigger -->
                <li><a class="dropdown-button" href="#!" data-activates="projectMenu">Cases<i class="material-icons right">arrow_drop_down</i></a></li>
                <li><a class="dropdown-button" href="#!" data-activates="taskMenu">Tasks<i class="material-icons right">arrow_drop_down</i></a></li>
                <li><a class="dropdown-button" href="#!" data-activates="calenderMenu">Calandar<i class="material-icons right">arrow_drop_down</i></a></li>
                <li><a class="dropdown-button" href="#!" data-activates="printMenu">Printing<i class="material-icons right">arrow_drop_down</i></a></li>


            </ul>
            <ul class="side-nav" id="mobile-demo">
                <li><a class="mdl-navigation__link" href="~/RequestForm.aspx" target="_blank">New Case</a></li>
                <li><a class="mdl-navigation__link" href="~/Request/Index">All Cases</a></li>
                <li><a class="mdl-navigation__link" href="~/Request/MyProjects">My Cases</a></li>
                <li><a class="mdl-navigation__link" href="~/Request/TaskList">Tasks</a></li>
                <li><a class="mdl-navigation__link" href="~/Request/TaskList?assignedTo=@name">My Tasks</a></li>
                @*<li><a class="mdl-navigation__link" href="~/TimeSheet/Index">Reports</a></li>*@
                <li><a class="mdl-navigation__link" href="~/Template/Index">Templates</a></li>
                <li><a class="mdl-navigation__link" href="~/Calendar/Index">Calendar</a></li>
                <li><a class="mdl-navigation__link" href="~/Request/PrintMyProjects" target="_blank">Print My Cases</a></li>
                <li><a class="mdl-navigation__link" href="~/Request/PrintMyTaskList" target="_blank">Print My Tasks</a></li>
            </ul>
        </div>
    </nav>
    }
    else
    {
        <nav>
            <div class="nav-wrapper">
                <a href="~/Default/Index" class="navbar-brand"><img src="~/images/CCFilesLogo.png" alt="Tracker Logo" /></a>
                <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
                
                <ul class="right hide-on-med-and-down">
                    <li><a class="mdl-navigation__link" href="~/RequestForm.aspx" target="_blank">New Case</a></li>
                    <li><a class="mdl-navigation__link" href="~/User/MyRequests">My Requests</a></li>
                </ul>

                <ul class="side-nav" id="mobile-demo">
                    <li><a class="mdl-navigation__link" href="~/RequestForm.aspx" target="_blank">New Case</a></li>
                    <li><a class="mdl-navigation__link" href="~/User/MyRequests">My Requests</a></li>
                </ul>

            </div>
        </nav>
    }


    <main class="mdl-layout__content" style="flex: 1 0 auto;">
        <div class="page-content">

            @RenderBody()

        </div>
    </main>
    <br /><br />
    @*        <footer class="page-footer" >
            <div class="footer-copyright">
                <div class="container">
                    <p class="center-align">Copyright © 2015 Sullivan University System | Creative Communications</p>
                </div>
            </div>
        </footer>*@

    <script type="text/javascript">
        $(document).ready(function () {

            //if ((Modernizr.prefixed("fontFeatureSettings") === false)) {
            //    $('.prefix').hide();
            //}

            $(".dropdown-button").dropdown();

            $(".button-collapse").sideNav();

            $('#mobile-demo').show();

            $('select').material_select(function () {
                $('input.select-dropdown').trigger('close');
            });

            var onMouseDown = function (e) {
                // preventing the default still allows the scroll, but blocks the blur.
                // We're inside the scrollbar if the clientX is >= the clientWidth.
                if (e.clientX >= e.target.clientWidth) {
                    e.preventDefault();
                }

            };
            //$newSelect.on('mousedown', onMouseDown);
            $('select').siblings('input.select-dropdown').on('mousedown', onMouseDown);


            //$('fieldset').each(function () {
            //    $(this).parent().css('border-radius', '0.3em');
            //});

            //$('legend').each(function () {
            //    $(this).addClass('center-align');
            //});


            if ($(window).width() <= 500) {
                var canvasWidth = $(window).width() - 50;

                $('.pad').attr('width', canvasWidth);
            }

            $(window).resize(function () {
                if ($(window).width() <= 500) {
                    var canvasWidth = $(window).width() - 50;

                    $('.pad').attr('width', canvasWidth);
                }
                else {
                    $('.pad').attr('width', '450');
                }
            });

            if ($(window).width() <= 1000) {
                $('.infoTable').css('width', $(window).width() - 30);
                $('.infoTable thead').css('width', '25%');
            }

            $(window).resize(function () {
                if ($(window).width() <= 1000) {
                    $('.infoTable').css('width', $(window).width() - 30);
                    $('.infoTable thead').css('width', '25%');
                }
                else {
                    $('.infoTable').css('width', '100%');
                    $('.infoTable thead').css('width', '100%%');
                }
            });


            //if ($(window).resize() <= 1000) {
            //    alert("test");
            //    $('table').css('width', $(window).width() - 30);
            //}


            $('.datepicker').pickadate({
                format: 'mm/dd/yyyy',
                header: 'picker__header',
                selectMonths: true, // Creates a dropdown to control month
                selectYears: 15,
                autoclose: true,// Creates a dropdown of 15 years to control year
                onClose: function () {
                    $(':focus').blur();
                },
                onSet: function (arg) {
                    if ('select' in arg) { //prevent closing on selecting month/year
                        this.close();
                    }
                }
            });

            $('input[type="radio"]').each(function () {
                var id = $(this).attr('id');

                var v = $('input[id=' + id + ']:checked').length;

                if (v > 0)
                    $(this).parentsUntil('div.input-field').prev().prev().addClass('active');

            });

            $('.placeholder').each(function () {
                if ($(this).val().length > 0) {
                    $(this).prev().css('color', '#00796b');
                }
                else {
                    $(this).prev().css('color', 'black');
                }
            });

            $('.placeholder').focus(function () {

                $(':focus').prev().css('color', '#00796b');

            });

            $('.placeholder').blur(function () {

                if ($(this).val().length > 0) {
                    $(this).prev().css('color', '#00796b');
                }
                else {
                    $(this).prev().css('color', 'black');
                }

            });

            $('input:radio').focus(function () {
                $(this).parentsUntil('div.input-field').prev().prev().addClass('active');
            });

            $('.select-dropdown').click(function () {
                $(this).parent().prev().addClass('active');
            });

            $('.select-dropdown').each(function () {
                if ($(this).val().length > 0 && $(this).val() != "Please Select:") {
                    $(this).parent().prev().addClass('active');
                }
            });

            $('.select-dropdown').change(function () {

                if ($(this).val().length > 0 && $(this).val() != "Please Select:")
                    $(this).parent().prev().addClass('active');
                else
                    $(this).parent().prev().removeClass('active');

                alert($(this).val());
            });

            $('.select-dropdown').blur(function () {
                if ($(this).val() != 'Please Select:')
                    $(this).parent().prev().addClass('active');
                else
                    $(this).parent().prev().removeClass('active');
            });


            $('input:radio').blur(function () {

                var id = $(this).attr('id');

                var v = $('input[id=' + id + ']:checked').length;

                if (v > 0)
                    $(this).parentsUntil('div.input-field').prev().prev().addClass('active');
                else
                    $(this).parentsUntil('div.input-field').prev().prev().removeClass('active');

            });

            $('.datePicker').change(function () {
                $(this).prev().addClass('active');
            });

            $('canvas').click(function () {
                $('#sigIcon').addClass('active');
            });

            $('.clearButton').click(function () {
                $('#sigIcon').removeClass('active');
            });

            $('.btn').click(function () {
                $('.btn').css("background", "#448aff");
            });

            //$('<i class="material-icons prefix">forward</i>').insertAfter('#Acknowledge').parent().children();


            $('.phone').change(function () {

                var phone = $(this).val();

                phone = phone.replace("-", "");
                phone = phone.replace("-", "");
                phone = phone.replace("-", "");
                phone = phone.replace("(", "");
                phone = phone.replace(")", "");
                phone = phone.replace(" ", "");
                phone = phone.trim();

                if (phone.length == 10 || phone.length == 11) {

                    if (phone.length == 11) {
                        phone = phone.slice(1, 11);
                    }

                    phone = phone.substr(0, 0) + '(' + phone.substr(0);
                    phone = phone.substr(0, 4) + ')' + phone.substr(4);
                    phone = phone.substr(0, 8) + '-' + phone.substr(8);
                }
                else {
                    phone = "";
                }

                $(this).val(phone);

                $(this).prev().addClass('active');


            });

            $('.SSN').change(function () {

                var ssn = $(this).val();

                ssn = ssn.replace("-", "");
                ssn = ssn.replace("-", "");
                ssn = ssn.trim();

                if (ssn.length == 9) {

                    ssn = ssn.substr(0, 3) + '-' + ssn.substr(3);
                    ssn = ssn.substr(0, 6) + '-' + ssn.substr(6);
                }
                else {
                    ssn = "";
                }

                $(this).val(ssn);

                $(this).prev().addClass('active');


            });
        });


        var myApp = angular.module('CCApp', []);

        myApp.controller('caseCtrl', function ($scope, $anchorScroll, $timeout, $location) {
            $scope.name = 'World';

            //var param =  $window.location.search.position;

            //if(param == "EditTask")
            //{
            //    $location.hash(param);

            //    // call $anchorScroll()
            //    $anchorScroll();
            //}

            $timeout(function ($routeProvider) {

                if (getUrlVars()["position"] != null) {
                    var position = getUrlVars()["position"];

                    $location.hash(position);

                    // call $anchorScroll()
                    $anchorScroll();

                }


            });
        });



        function getUrlVars() {
            var vars = [], hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars;
        }
    </script>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        var pageTracker = _gat._getTracker("UA-1162758-4");
        pageTracker._initData();
        pageTracker._trackPageview();
    </script>

</body>

</html>
